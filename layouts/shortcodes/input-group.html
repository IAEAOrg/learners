{{ $group_title := .Get "title" | default "" }}
{{ $group_extendable := .Get "extendable" | default false }}
{{ $group_minInputs := .Get "min" | default 0 }}
{{ $list := .Get "list" | default false }}

{{ $.Page.Scratch.Add "fieldset" 1 }}
{{ $fieldset_id := printf "%s" (md5 (printf "fieldset%s%s" ($.Page.File.Dir) ($.Page.Scratch.Get "fieldset"))) }}

<fieldset 
  extendable="{{ $group_extendable }}" 
  title='{{ $group_title | lower | replaceRE "[^0-9a-z]" "_" | replaceRE "-+" "_" }}'
  id="{{ $fieldset_id }}"
  minInputs="{{ $group_minInputs }}"
>

<div class="input-group default-inputs {{ if $list }} list-row {{ end }}" >
<div class='closer' style="display: none; order: 1">
  <svg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='currentColor' class='w-6 h-6'>
    <path stroke-linecap='round' stroke-linejoin='round' d='M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z' />
  </svg>
</div>

{{ if $group_title | len }}
<h4>{{ $group_title }}</h4>
{{ end }}

<div id="fieldset-error"></div>

<!-- Form elements -->
{{ .Inner }}

<input type="hidden" class="input divider" name="divider" value="--divider--">
 
</div>

{{ if $group_extendable }}
<div id="extendedInputs"></div>

<button type="button" class="add-input-row" value="">  
  <span>
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
    </svg>
  </span>
  <span>
    add row
  </span>
</button>
{{ end }}

</fieldset>